(this.webpackJsonpec24h_translate=this.webpackJsonpec24h_translate||[]).push([[0],{83:function(e,a,t){e.exports=t(98)},88:function(e,a,t){},91:function(e,a,t){},98:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(11),l=t.n(r),o=(t(88),t(18)),i=t.n(o),u=t(27),s=(t(90),t(91),t(56)),m=t(9),d=t(15),p=t(12),g=t(128),f=[{name:"action"},{name:"key",width:150}],v=["INSERT","UPDATE"],b=["input","auto","copy"],y=[{name:"polish",code:"pl",key:1,setting:"input"},{name:"english",code:"en",key:9,setting:"input"},{name:"espanol",code:"es",key:11,setting:"copy"},{name:"french",code:"fr",key:12,setting:"copy"},{name:"german",code:"de",key:10,setting:"copy"},{name:"norwegian",code:"no",key:14,setting:"copy"},{name:"russian",code:"ru",key:13,setting:"copy"},{name:"swedish",code:"sv",key:15,setting:"copy"},{name:"czech",code:"cs",key:16,setting:"copy"},{name:"slovak",code:"sk",key:17,setting:"copy"},{name:"italian",code:"it",key:18,setting:"copy"},{name:"hungarian",code:"hu",key:19,setting:"copy"}],E=t(136),h=t(131),O=t(72),j=t(137),k=t(138),x=t(133),C=t(99),N=t(151),w=t(134),_=t(149),S=t(135),T=Object(g.a)((function(e){return{row:{display:"flex",alignItems:"center"},label:{fontSize:10},radio:{padding:4}}})),D=function(e){var a=e.source,t=e.languages,n=e.onSettingChange,r=T(),l=f.map((function(e){return c.a.createElement(h.a,{style:{minWidth:e.width?e.width:"auto"},key:"col-".concat(e.name)},e.name)})),o=t.map((function(e){var t=e.name,l=e.key,o=e.code,i=e.setting;return c.a.createElement(h.a,{key:"col-".concat(t)},c.a.createElement("div",null,c.a.createElement("div",{className:r.row},c.a.createElement(x.a,{component:"fieldset"},c.a.createElement(C.a,{component:"legend"},t),c.a.createElement(N.a,{"aria-label":"gender",name:"gender1",value:i,onChange:function(e){return n(l,e.target.value)}},b.map((function(e){return c.a.createElement(w.a,{key:"radio-".concat(e),value:e,control:c.a.createElement(_.a,{disabled:o===a,classes:{root:r.radio}}),label:e,classes:{label:r.label}})})))))))})),i=[].concat(Object(d.a)(l),Object(d.a)(o));return c.a.createElement(S.a,{className:"TableHead"},c.a.createElement(E.a,null,i))},I=Object(g.a)((function(e){return{root:{width:"100%",overflow:"auto"},cellCol:{display:"flex",flexDirection:"column"},prevText:{color:"grey"}}})),A=f.length+y.length,R=function(e){var a=e.source,t=e.languages,n=e.onSettingChange,r=e.translations,l=I();console.log(r);var o=r.map((function(e){var a=e.action,t=e.key,n=e.translationData,r=e.originalData;return c.a.createElement(E.a,{key:"row-".concat(t)},c.a.createElement(h.a,null,a),c.a.createElement(h.a,null,t),n.map((function(e,a){var n=e.text,o=e.code,i=c.a.createElement(h.a,{key:"".concat(t,"-").concat(o)},n);if(r.length>0){var u=r[a].text;i=c.a.createElement(h.a,{key:"".concat(t,"-").concat(o)},c.a.createElement("div",{className:l.cellCol},c.a.createElement("div",null,n),c.a.createElement("div",{className:l.prevText},u)))}return i})))})),i=c.a.createElement(E.a,null,c.a.createElement(h.a,{colSpan:A},c.a.createElement(O.a,{align:"center"},c.a.createElement("em",null,"No data"))));return c.a.createElement("div",{className:l.root},c.a.createElement(j.a,null,c.a.createElement(D,{source:a,languages:t,onSettingChange:n}),c.a.createElement(k.a,null,0===r.length?i:o)))},W=t(153),P=t(154),M=t(141),F=t(148),U=Object(g.a)((function(e){return{formControl:{minWidth:200},text:{marginTop:e.spacing(1),marginBottom:e.spacing(2)}}})),q=function(e){var a=e.languages,t=e.source,n=e.onSourceChange,r=e.copySource,l=e.onCopySourceChange,o=e.fileType,i=e.setFileType,u=U(),s=a.map((function(e){var a=e.name,t=e.code;return c.a.createElement(W.a,{key:"item-".concat(t),value:t},a)}));return c.a.createElement("div",{className:"TranslatorOptions"},c.a.createElement(O.a,{className:u.text},"General settings"),c.a.createElement(P.a,{label:"File type",variant:"outlined",value:o,onChange:function(e){i(e.target.value)}}),c.a.createElement(O.a,{className:u.text},"Translation options"),c.a.createElement(x.a,{variant:"outlined",className:u.formControl},c.a.createElement(M.a,{id:"translation-src-label"},"translation source"),c.a.createElement(F.a,{labelId:"translation-src-label",id:"translation-src",value:t,onChange:function(e){return n(e.target.value)},label:"translation source"},s)),c.a.createElement(x.a,{variant:"outlined",className:u.formControl},c.a.createElement(M.a,{id:"copy-src-label"},"copy source"),c.a.createElement(F.a,{labelId:"copy-src-label",id:"copy-src",value:r,onChange:function(e){return l(e.target.value)},label:"copy source"},s)))},L=t(143),z=t(67),B=t.n(z),$=t(68),H=t.n($),J=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"center"},btn:{display:"block",margin:e.spacing(2),"& svg":{verticalAlign:"middle"}}}})),G=function(e){var a=e.onOpenModal,t=e.onExport,n=J();return c.a.createElement("div",{className:n.root},c.a.createElement(L.a,{variant:"contained",color:"primary",className:n.btn,onClick:a},"Add text",c.a.createElement(B.a,null)),c.a.createElement(L.a,{variant:"outlined",color:"primary",className:n.btn,onClick:t},"Export",c.a.createElement(H.a,null)))},V=t(13),K=t(152),Q=t(144),X=t(145),Y=t(146),Z=t(69),ee=t.n(Z),ae=Object(g.a)((function(e){return{input:{marginBottom:e.spacing(2)}}})),te=function(e){var a=e.isModal,t=e.modalData,r=e.setIsModal,l=e.onAddTranslation,o=ae(),s=function(){r(!1)},g=Object(n.useState)(t),f=Object(p.a)(g,2),b=f[0],y=f[1],E=Object(n.useState)([]),h=Object(p.a)(E,2),j=h[0],k=h[1];Object(n.useEffect)((function(){y(t)}),[t]),Object(n.useEffect)((function(){if(j.length>0){var e=b.originalData.map((function(e){var a=j.find((function(a){return a.language_id==e.key}));console.log(a);var t=null===a||void 0===a?void 0:a.languages_translations_value;return Object(m.a)(Object(m.a)({},e),{},{text:t})}));y(Object(m.a)(Object(m.a)({},b),{},{originalData:e})),console.log("set",e)}}),[j]);var C=b.action,N=b.key,w=b.translationData,_=b.originalData,S=function(e,a,t){var n=Object(d.a)(b[a]),c=n.findIndex((function(e){return e.key===t}));n[c]=Object(m.a)(Object(m.a)({},n[c]),{},{text:e.target.value}),y(Object(m.a)(Object(m.a)({},b),{},Object(V.a)({},a,n)))},T=function(){var e=Object(u.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a[0],(n=new FileReader).addEventListener("load",(function(){var e,a=JSON.parse(n.result);k(null===(e=a[2])||void 0===e?void 0:e.data)}),!1),t&&n.readAsText(t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement(K.a,{open:a,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0},c.a.createElement(Q.a,{id:"alert-dialog-title"},"Fill the translation data"),c.a.createElement(X.a,null,c.a.createElement(x.a,{variant:"outlined",className:o.input,fullWidth:!0},c.a.createElement(M.a,{id:"query-action-type-label"},"translation source"),c.a.createElement(F.a,{labelId:"query-action-type-label",id:"query-action-type",value:C,onChange:function(e){y(Object(m.a)(Object(m.a)({},b),{},{action:e.target.value}))},label:"Action type"},v.map((function(e){return c.a.createElement(W.a,{key:"action-".concat(e),value:e},e)})))),c.a.createElement(P.a,{className:o.input,label:"key",InputLabelProps:{shrink:!0},placeholder:"Type translation key",variant:"outlined",value:N,onChange:function(e){y(Object(m.a)(Object(m.a)({},b),{},{key:e.target.value}))},fullWidth:!0}),"UPDATE"===b.action&&c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,null,"Original values"),c.a.createElement(ee.a,{fileTypes:[".json"],handleFiles:T},c.a.createElement("button",{className:"btn"},"Upload")),_.map((function(e){var a=e.name,t=e.text,n=e.key,r=e.code;return c.a.createElement(P.a,{key:"modal-input-".concat(r),className:o.input,label:a,InputLabelProps:{shrink:!0},placeholder:"Type ".concat(a," text"),variant:"outlined",value:t,onChange:function(e){return S(e,"originalData",n)},fullWidth:!0})})),c.a.createElement(O.a,null,"Updated values")),w.map((function(e){var a=e.name,t=e.text,n=e.key,r=e.code;return c.a.createElement(P.a,{key:"modal-input-".concat(r),className:o.input,label:a,InputLabelProps:{shrink:!0},placeholder:"Type ".concat(a," text"),variant:"outlined",value:t,onChange:function(e){return S(e,"translationData",n)},fullWidth:!0})}))),c.a.createElement(Y.a,null,c.a.createElement(L.a,{onClick:function(){l(b)},color:"primary",variant:"contained"},"Save"),c.a.createElement(L.a,{onClick:s,color:"primary",variant:"outlined"},"Close")))},ne=function(e,a,t){return new Promise((function(n,c){var r="https://api.mymemory.translated.net/get?q=".concat(encodeURI(e),"!&langpair=").concat(a,"|").concat(t);fetch(r).then((function(e){return e.json()})).then((function(e){return n(e.responseData.translatedText)}))}))},ce=function(e,a,t,n,c){return"INSERT INTO languages_translations (language_id, languages_translations_file, languages_translations_key, languages_translations_value, languages_translations_oryginal_value, languages_translations_strtr_keys) VALUES ('".concat(e,"', '").concat(a).concat(t,"', '").concat(n,"', '").concat(c,"', '").concat(c,"', '").concat(n,"');")},re=function(e,a,t,n,c){return"UPDATE languages_translations SET languages_translations_oryginal_value = '".concat(c,"', languages_translations_value = '").concat(c,"' WHERE languages_translations_key = '").concat(n,"' AND language_id = '").concat(e,"';")},le=function(e){var a=e.map((function(e){return"'".concat(e,"'")})).join(",");return"DELETE FROM `languages_translations` WHERE `languages_translations_key` IN(".concat(a,");")},oe=function(e){var a=e.join("\n\t");return'\n  $sql= "'.concat(a,'";\n  $this->execute($sql);')},ie=function(e,a){var t=a.join("\n\n");return"\n  public function ".concat(e,"()\n  { \n      ").concat(t,"\n  }\n  ")},ue=t(147),se=t(100),me=t(71),de=t.n(me),pe=t(70),ge=t.n(pe),fe=Object(g.a)((function(e){return{textarea:{width:"100%"},title:{display:"flex",justifyContent:"space-between"}}})),ve=function(e){var a=e.output,t=fe();return c.a.createElement("div",{className:"TranslatorOutput"},c.a.createElement("div",{className:t.title},c.a.createElement(O.a,{display:"inline"},"Output"),c.a.createElement(ue.a,{size:"small",onClick:function(){ge()(a)}},c.a.createElement(de.a,{fontSize:"small"}))),c.a.createElement("div",null,c.a.createElement(O.a,null,"Run ",c.a.createElement("code",null,"docker-compose exec web bash")),c.a.createElement(O.a,null,"Go to ",c.a.createElement("code",null,"/lib/tools")),c.a.createElement(O.a,null,"Run ",c.a.createElement("code",null,"php vendor/bin/phinx create ","<MigrationName>")),c.a.createElement(O.a,null,"Paste commands into created file"),c.a.createElement(O.a,null,"Run ",c.a.createElement("code",null,"php vendor/bin/phinx migrate"))),c.a.createElement(se.a,{value:a,rowsMin:3,className:t.textarea}))},be=Object(g.a)((function(e){return{root:{padding:e.spacing(1)}}})),ye={action:v[0],key:"",translationData:[],originalData:[]},Ee=function(e){var a=be(),t=Object(n.useState)(".php"),r=Object(p.a)(t,2),l=r[0],o=r[1],g=Object(n.useState)("pl"),f=Object(p.a)(g,2),v=f[0],b=f[1],E=Object(n.useState)("en"),h=Object(p.a)(E,2),O=h[0],j=h[1],k=Object(n.useState)(y),x=Object(p.a)(k,2),C=x[0],N=x[1],w=Object(n.useState)([]),_=Object(p.a)(w,2),S=_[0],T=_[1],D=Object(n.useState)(ye),I=Object(p.a)(D,2),A=I[0],W=I[1],P=Object(n.useState)(!1),M=Object(p.a)(P,2),F=M[0],U=M[1],L=Object(n.useState)(""),z=Object(p.a)(L,2),B=z[0],$=z[1],H=function(e,a){var t=Object(d.a)(C),n=C.findIndex((function(a){return a.key===e}));t[n]=Object(m.a)(Object(m.a)({},C[n]),{},{setting:a}),N(t)},J=function(){var e=Object(u.a)(i.a.mark((function e(a){var t,n,c,r,l,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.translationData,n=t.find((function(e){return e.code===v})),c=n.text,r=C.map(function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.find((function(e){return e.key===a.key})),r="",!n){e.next=6;break}r=n.text,e.next=13;break;case 6:if("auto"!==a.setting){e.next=12;break}return e.next=9,ne(c,v,a.code);case 9:r=e.sent,e.next=13;break;case 12:"copy"===a.setting&&(r="--copy-text--");case 13:return e.abrupt("return",Object(m.a)(Object(m.a)({},a),{},{text:r}));case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=6,Promise.all(r);case 6:l=e.sent,o=l.find((function(e){return e.code===O})).text,s=l.map((function(e){var a=e.text;return"--copy-text--"===a&&(a=o),Object(m.a)(Object(m.a)({},e),{},{text:a})})),T([].concat(Object(d.a)(S),[Object(m.a)(Object(m.a)({},a),{},{translationData:s})]));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:a.root},c.a.createElement(q,{languages:y,source:v,onSourceChange:function(e){var a=C.find((function(a){return a.code===e}));H(a.key,"input"),b(e)},copySource:O,onCopySourceChange:function(e){j(e)},fileType:l,setFileType:o}),c.a.createElement(R,{source:v,languages:C,onSettingChange:H,translations:S}),c.a.createElement(G,{onOpenModal:function(){var e=C.filter((function(e){return"input"===e.setting})).map((function(e){return Object(m.a)(Object(m.a)({},e),{},{text:""})})),a=C.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{text:""})})),t=Object(m.a)(Object(m.a)({},ye),{},{translationData:e,originalData:a});W(t),U(!0)},onExport:function(){var e,a,t=[],n=[],c=[],r=Object(s.a)(S);try{var o=function(){var e=a.value,r=e.action,o=e.key,i=e.translationData,u=e.originalData,m=[],d=[];if("INSERT"===r){c.push(o);var p,g=Object(s.a)(i);try{for(g.s();!(p=g.n()).done;){var f=p.value,v=ce(f.key,f.name,l,o,f.text);m.push(v)}}catch(b){g.e(b)}finally{g.f()}t.push(oe(m))}else"UPDATE"===r&&(i.forEach((function(e,a){var t=u[a];if(t.text&&e.text!==t.text){var n=re(e.key,e.name,0,o,e.text),c=re(t.key,t.name,0,o,t.text);m.push(n),d.push(c)}})),t.push(oe(m)),n.push(oe(d)))};for(r.s();!(a=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}var i=oe([le(c)]);n.push(i),e=ie("up",t)+"\n"+ie("down",n),$(e)}}),B&&c.a.createElement(ve,{output:B}),c.a.createElement(te,{isModal:F,modalData:A,setIsModal:U,onAddTranslation:J}))};var he=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[83,1,2]]]);
//# sourceMappingURL=main.2d59c67c.chunk.js.map